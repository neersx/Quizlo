<app-page-header firstTitle="Exams" title="Start Your Test" title1="Test" activeTitle="Start your test"></app-page-header>
<!-- Start::row-1 -->
<div class="row">
    <div *ngIf="testDetails && !canLoadQuestions" class="col-xxl-12">
        <div class="card">
            <div class="card-body">
                <div class="card custom-card overflow-hidden job-info-banner">
                </div>
                <div class="card border border-dashed custom-card job-info-data mb-2">
                    <div class="card-body">
                        <div class="d-flex flex-wrap align-items-top justify-content-between gap-2">
                            <div>
                                <div class="d-flex flex-wrap gap-2">
                                    <div>
                                        <span class="avatar avatar-lg border p-1">
                                            <img [src]="testDetails.imageUrl" alt="testDetails.examCode">
                                        </span>
                                    </div>
                                    <div *ngIf="testDetails">
                                        <h5 class="fw-medium mb-0 d-flex align-items-center">
                                          <a href="javascript:void(0);" class="">{{ testDetails.examCode }}</a>
                                        </h5>
                                        <a href="javascript:void(0);" class="fs-12 text-muted">
                                          <i class="bi bi-building"></i> {{ testDetails.examName }}
                                        </a>
                                        <div class="d-flex mt-3">
                                          <div>
                                            <p class="mb-1"><i class="bi bi-geo-alt me-1"></i>Online, INDIA</p>
                                            <p *ngIf="testDetails?.questions"><i class="bi bi-briefcase me-1"></i>
                                              Total Questions: {{ testDetails.questions?.length }}</p>
                                          </div>
                                          <div class="ms-4">
                                            <p class="mb-1"><i class="bi bi-book me-1"></i>
                                              <span class="fw-medium">Language: {{ testDetails.language }}</span>
                                            </p>
                                            <p><i class="bi bi-mortarboard  me-1"></i>Subject : {{ testDetails.subject }}</p>
                                          </div>
                                          <div class="ms-4">
                                            <p class="mb-1"><i class="bi bi-coin me-1"></i>
                                              <span class="fw-medium">Difficulty: {{ testDetails.difficulty ?? 'Medium' }}</span>
                                            </p>
                                          
                                          </div>
                                        </div>
                                        <div class="popular-tags">
                                          <a href="javascript:void(0);" class="badge rounded-pill bg-light text-primary me-2">
                                            <i class="bi bi-clock me-1"></i>{{ convertDurationToText(testDetails.duration) }}
                                          </a>
                                          <a href="javascript:void(0);" class="badge rounded-pill bg-light text-default me-1">
                                            <i class="bi bi-briefcase me-1"></i>Not Started
                                          </a>
                                        </div>
                                      </div>
                                      
                                </div>
                            </div>
                            <div class="text-end ms-auto">
                                <a href="javascript:void(0);" data-bs-toggle="tooltip" placement="top" ngbTooltip="Save"
                                    class="rounded-pill btn btn-icon btn-primary-light btn-wave btn-sm">
                                    <i class="ri-bookmark-line"></i>
                                </a>
                                <p class="mb-0 mt-4 pt-3"><i class="bi bi-info-circle text-info"
                                        data-bs-toggle="tooltip" placement="top" ngbTooltip="20 days left"></i> <span
                                        class="fw-medium"> Read Instructions </span> before start the Test</p>
                                <div class="d-flex gap-2 flex-wrap mt-3 justify-content-end">
                                    <button type="button" class="btn btn-primary btn-sm btn-wave">Read Instructions</button>
                                    <!-- <a href="javascript:void(0);" class="btn mb-0 btn-icon btn-success-light btn-wave">
                                        <i class="ri-heart-line"></i>
                                    </a>
                                    <a href="javascript:void(0);"
                                        class="btn mb-0 btn-icon btn-info-light btn-wave me-0">
                                        <i class="ri-share-line"></i>
                                    </a> -->
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="card custom-card">
            <div class="card-body">
                <h6 class="fw-medium">Test Description and Guidelines</h6>
                <p class="op-9">Welcome to <b>Quizlo Ai</b> – your gateway to practicing for entrance exams and many more. This online mock test is designed to provide a real exam experience and help you evaluate your preparation effectively. Please read the following guidelines carefully before starting your test.</p>
                <p class="mb-4 op-9">By attempting this test, you agree to adhere to the platform's rules to ensure a fair and smooth assessment process. All your responses will be recorded and reviewed as per the platform’s assessment criteria.</p>
                
                <h6 class="fw-medium">Test Guidelines</h6>
                <ol class="list-group border-0 list-unstyled list-group-numbered mb-0">
                    <li class="list-group-item border-0 py-1">Carefully read each question and all available options before selecting your answer.</li>
                    <li class="list-group-item border-0 py-1">Monitor the timer displayed on your screen and manage your time wisely. The test will automatically submit when the time ends.</li>
                    <li class="list-group-item border-0 py-1">Click “Save” or “Next” after each answer to ensure your responses are recorded.</li>
                    <li class="list-group-item border-0 py-1">You may navigate between questions if the test allows. Please check test-specific navigation rules before starting.</li>
                    <li class="list-group-item border-0 py-1">In case of technical issues, do not refresh the page. Contact support immediately if you face any interruptions.</li>
                    <li class="list-group-item border-0 py-1">Submit your test before the allotted time ends. Unsubmitted tests will be automatically submitted when time runs out.</li>
                </ol>
            </div>
        </div>
        <div class="card custom-card border shadow-none bg-primary-transparent border border-primary border-opacity-10">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h5 class="fw-medium mb-3"><i
                                class="ri-book-line me-2 p-2 bg-primary text-fixed-white fs-15 lh-1 align-middle rounded-circle"></i>
                                Please review all instructions before starting your test.</h5>
                        <span class="text-muted mb-0 fs-14">Best of luck with your exam! Stay calm, stay focused, and do your best!</span>
                    </div>
                    <div class="col-lg-4">
                        <a *ngIf="!isLoadingQuestions" (click)="startTestNow()" class="btn btn-success btn-lg" role="button">
                            <i class="bi bi-arrow-right-circle me-2 align-middle d-inline-block"></i>Start Test Now
                        </a>
                        <button *ngIf="isLoadingQuestions" class="btn btn-success-primary btn-lg" type="button" disabled>
                            <span class="spinner-border spinner-border-sm align-middle" role="status" aria-hidden="true"></span>
                            Loading Questions...
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-12" *ngIf="testDetails && canLoadQuestions">
        <div  class="card custom-card">
            <app-test-window [testData]="testDetails"></app-test-window>
        </div>
    </div>

</div>
<!-- End::row-1 -->