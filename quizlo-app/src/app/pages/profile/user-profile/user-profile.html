<app-page-header title="User Profile" title1="Pages" activeTitle="Profile"></app-page-header>
<!-- Start:: row-1 -->
<div class="row" *ngIf="user$ | async as user">
    <div class="col-xl-12">
      <div class="card custom-card profile-card">
        <!-- banner (static or replace with user.bannerUrl if you add one) -->
        <div class="profile-banner-img">
          <img src="assets/images/media/media-3.jpg" class="card-img-top" alt="banner">
        </div>
  
        <div class="card-body pb-0 position-relative">
          <div class="row profile-content">
            <div class="col-xl-9">
              <div class="card custom-card overflow-hidden border custom-tabs">
                <div class="card-body">
                  <ul
                    ngbNav
                    #nav="ngbNav"
                    [activeId]="1"
                    class="nav nav-tabs tab-style-6 mb-3 p-0"
                    id="myTab"
                    role="tablist"
                  >
                    <li [ngbNavItem]="1" class="nav-item" role="presentation">
                      <button
                        ngbNavLink
                        class="nav-link w-100 text-start"
                        type="button"
                      >
                        About
                      </button>
                      <ng-template ngbNavContent>
                        <div class="tab-pane show active p-0 border-0" tabindex="0">
                          <ul class="list-group list-group-flush border rounded-3">
                            <!-- About Info -->
                            <li class="list-group-item p-3">
                              <span class="fw-medium fs-15 d-block mb-3">
                                <span class="me-1">âœ¦</span>About Info :
                              </span>
                              <p class="text-muted mb-2">{{ user.about }}</p>
                            </li>
  
                            <!-- Contact Info -->
                            <li class="list-group-item p-3">
                              <span class="fw-medium fs-15 d-block mb-3">Contact Info :</span>
                              <div class="text-muted">
                                <p class="mb-3">
                                  <i class="ri-mail-line align-middle fs-15 text-primary me-2"></i>
                                  <span class="fw-medium">Email:</span>
                                  {{ user.email }}
                                </p>
                                <p class="mb-3" *ngIf="user.city || user.country">
                                  <i class="ri-map-pin-line align-middle fs-15 text-success me-2"></i>
                                  <span class="fw-medium">Location:</span>
                                  <!-- {{ [user.city, user.state, user.country]
                                        .filter(x => x)
                                        .join(', ') }} -->
                                </p>
                                <p class="mb-0" *ngIf="getAge(user.dateOfBirth) !== null">
                                  <i class="ri-calendar-line align-middle fs-15 text-info me-2"></i>
                                  <span class="fw-medium">Age:</span>
                                  {{ getAge(user.dateOfBirth) }}
                                </p>
                              </div>
                            </li>
  
                            <!-- Skills -->
                            <li class="list-group-item p-3" *ngIf="user.skills">
                              <span class="fw-medium fs-15 d-block mb-3">Skills :</span>
                              <div class="w-75">
                                <ng-container *ngFor="let skill of getSkills(user)">
                                  <span class="badge bg-light text-muted m-1 border">
                                    {{ skill }}
                                  </span>
                                </ng-container>
                              </div>
                            </li>
  
                            <!-- Social Media -->
                            <li class="list-group-item p-3">
                              <span class="fw-medium fs-15 d-block mb-3">Social Media :</span>
                              <div class="d-flex align-items-center gap-5 flex-wrap">
                                <ng-container *ngIf="user.linkedin">
                                  <a [href]="user.linkedin" target="_blank" class="d-flex align-items-center gap-2">
                                    <i class="ri-linkedin-line fs-20 text-info"></i>
                                    <span class="text-muted">{{ user.linkedin }}</span>
                                  </a>
                                </ng-container>
                                <ng-container *ngIf="user.twitter">
                                  <a [href]="user.twitter" target="_blank" class="d-flex align-items-center gap-2">
                                    <i class="ri-twitter-line fs-20 text-primary"></i>
                                    <span class="text-muted">{{ user.twitter }}</span>
                                  </a>
                                </ng-container>
                                <ng-container *ngIf="user.facebook">
                                  <a [href]="user.facebook" target="_blank" class="d-flex align-items-center gap-2">
                                    <i class="ri-facebook-line fs-20 text-primary"></i>
                                    <span class="text-muted">{{ user.facebook }}</span>
                                  </a>
                                </ng-container>
                                <ng-container *ngIf="user.instagram">
                                  <a [href]="user.instagram" target="_blank" class="d-flex align-items-center gap-2">
                                    <i class="ri-instagram-line fs-20 text-danger"></i>
                                    <span class="text-muted">{{ user.instagram }}</span>
                                  </a>
                                </ng-container>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </ng-template>
                    </li>
  
                    <li [ngbNavItem]="2" class="nav-item" role="presentation">
                      <button ngbNavLink class="nav-link w-100 text-start" type="button">
                        Edit Profile
                      </button>
                      <ng-template ngbNavContent>
                        <div class="tab-pane p-0 border-0" tabindex="0">
                          <!-- reuse same grouped fields but bind to a FormGroup if you want reactive forms -->
                          <form class="list-group list-group-flush border rounded-3 p-3">
                            <div class="row gy-3">
                              <div class="col-md-6">
                                <label class="fw-medium">First Name</label>
                                <input class="form-control" [(ngModel)]="user.firstName" name="firstName" />
                              </div>
                              <div class="col-md-6">
                                <label class="fw-medium">Last Name</label>
                                <input class="form-control" [(ngModel)]="user.lastName" name="lastName" />
                              </div>
                              <div class="col-md-6">
                                <label class="fw-medium">Profession</label>
                                <input class="form-control" [(ngModel)]="user.profession" name="profession" />
                              </div>
                              <div class="col-md-6">
                                <label class="fw-medium">City</label>
                                <input class="form-control" [(ngModel)]="user.city" name="city" />
                              </div>
                              <!-- add other fields similarly... -->
                              <div class="col-12 text-end">
                                <button class="btn btn-primary" type="submit">Save Changes</button>
                              </div>
                            </div>
                          </form>
                        </div>
                      </ng-template>
                    </li>
                  </ul>
  
                  <div class="tab-content" [ngbNavOutlet]="nav"></div>
                </div>
              </div>
            </div>
  
            <!-- sidebar -->
            <div class="col-xl-3">
              <div class="card custom-card overflow-hidden border">
                <div class="card-body border-bottom border-block-end-dashed text-center">
                  <span class="avatar avatar-xxl avatar-rounded online mb-3">
                    <img
                      [src]="user.imageUrl || 'assets/images/faces/placeholder.png'"
                      alt="{{ user.firstName }} {{ user.lastName }}"
                    />
                  </span>
                  <h5 class="fw-semibold mb-1">
                    {{ user.firstName }} {{ user.lastName }}
                  </h5>
                  <span class="d-block fw-medium text-muted mb-2">
                    {{ user.designation }}
                  </span>
                  <p class="fs-12 mb-0 text-muted">
                    <i class="ri-building-line me-1 align-middle"></i>
                    {{ user.company }}
                  </p>
                </div>
  
                <div class="p-3">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item border-0 py-2">
                      <div>
                        <span class="fw-medium me-2">Email :</span>
                        <span class="text-muted">{{ user.email }}</span>
                      </div>
                    </li>
                    <li class="list-group-item border-0 py-2" *ngIf="getAge(user.dateOfBirth) !== null">
                      <div>
                        <span class="fw-medium me-2">Age :</span>
                        <span class="text-muted">{{ getAge(user.dateOfBirth) }}</span>
                      </div>
                    </li>
                    <li class="list-group-item border-0 py-2">
                      <div>
                        <span class="fw-medium me-2">Location :</span>
                        <span class="text-muted">
                          <!-- {{ [user.city, user.country].filter(x => x).join(', ') }} -->
                        </span>
                      </div>
                    </li>
                    <!-- add more basic info as needed -->
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
<!-- End:: row-1 -->